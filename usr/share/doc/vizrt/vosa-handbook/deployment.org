** Deploying a new EAR file
In the examples here, we have a build server on builder.example.com
where we build EARs for the the tomato website.

*** Deploying a new EAR file for an ECE instance
#+BEGIN_SRC sh
torstein@control:~$ sudo ssh escenic@pres1 ece -i engine1 --uri http://builder.example.com/tomato/releases/tomato-trunk-rev4121-2012-07-05_1524.ear  deploy
[ece#engine-engine1] Deploying http://builder.example.com/tomato/releases/tomato-trunk-rev4121-2012-07-05_1524.ear on engine1 ...
[ece#engine-engine1] Deploying /var/cache/escenic/tomato-trunk-rev4121-2012-07-05_1524.ear on tomcat ...
[ece#engine-engine1] Deployment white list active, only deploying: eb escenic-admin indexer-webservice
[ece#engine-engine1] Deployment state file updated: /var/lib/escenic/engine1.state
#+END_SRC

We can now restart the ECE:

#+BEGIN_SRC sh
torstein@control$ sudo ssh root@pres1 /etc/init.d/ece restart 
[ece#engine-engine1] Stopping the engine1 instance of engine on pres1 ...
[ece#engine-engine1] Starting the engine1 instance of engine on pres1 ...
[ece#search-search1] Stopping the search1 instance of search on pres1 ...
[ece#search-search1] Starting the search1 instance of search on pres1 ...
#+END_SRC

To confirm see that the ECE instance came up again, do:

#+BEGIN_SRC sh
torstein@control:~$ sudo ssh root@pres1 /etc/init.d/ece status
[ece#engine-engine1] UP 0d 0h 11m 45s
[ece#search-search1] UP 0d 0h 11m 42s
#+END_SRC

*** Deploying a new EAR file for a search instance
The search instance is special in that you have to specify the type
parameter. Apart from this, the command is identical. You'll see that
the search instance has a different deployment white list than that of
the ECE instance above.

#+BEGIN_SRC sh
torstein@control:~$ sudo ssh escenic@pres1 ece -i search1 -t search --uri http://builder.example.com/tomato/releases/tomato-trunk-rev4121-2012-07-05_1524.ear deploy
[ece#search-search1] Deploying http://builder.example.com/tomato/releases/tomato-trunk-rev4121-2012-07-05_1524.ear on search1 ...
[ece#search-search1] Deploying /var/cache/escenic/tomato-trunk-rev4121-2012-07-05_1524.ear on tomcat ...
[ece#search-search1] Deployment white list active, only deploying: escenic-admin solr indexer-webapp
[ece#search-search1] Deployment state file updated: /var/lib/escenic/search1.state  
#+END_SRC

